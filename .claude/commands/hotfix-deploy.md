# Hotfix Deploy Command\n\nRapidly deploy critical hotfixes with proper safety measures and minimal downtime for any production system.\n\n## Instructions\n\nFollow this emergency hotfix deployment process: **$ARGUMENTS**\n\n1. **Emergency Assessment and Triage**\n   - Assess the severity and impact of the issue\n   - Determine if a hotfix is necessary or if it can wait\n   - Identify affected systems and user impact\n   - Estimate time sensitivity and business impact\n   - Document the incident and decision rationale\n\n2. **Incident Response Setup**\n   ```bash\n   # Create incident tracking\n   # Document in incident management system\n   # Set up war room/communication channel\n   # Notify stakeholders and on-call team\n   \n   # Example Slack notification\n   # \"ðŸš¨ HOTFIX REQUIRED: Critical security vulnerability in user auth\n   # Impact: All users unable to login\n   # ETA for fix: 30 minutes\n   # War room: #incident-2024-0115\"\n   ```\n\n3. **Branch and Environment Setup**\n   ```bash\n   # Create hotfix branch from production tag\n   git fetch --tags\n   git checkout tags/v1.2.3  # Latest production version\n   git checkout -b hotfix/critical-auth-fix\n   \n   # Alternative: Branch from main if using trunk-based development\n   git checkout main\n   git pull origin main\n   git checkout -b hotfix/critical-auth-fix\n   ```\n\n4. **Rapid Development Process**\n   - Keep changes minimal and focused\n   - Fix only the critical issue, nothing else\n   - Avoid refactoring or optimization\n   - Use well-tested patterns and approaches\n   - Add minimal logging for troubleshooting\n\n   ```javascript\n   // Example minimal fix\n   // Before (vulnerable code)\n   if (user.password === plainPassword) {\n     return true;\n   }\n   \n   // After (secure fix)\n   if (bcrypt.compareSync(plainPassword, user.hashedPassword)) {\n     return true;\n   }\n   ```\n\n5. **Accelerated Testing**\n   ```bash\n   # Run focused tests\n   npm test -- --testPathPattern=auth\n   npm run test:security\n   \n   # Manual testing checklist\n   # [ ] Core functionality works\n   # [ ] Hotfix resolves the issue\n   # [ ] No new issues introduced\n   # [ ] Critical user flows work\n   ```\n\n6. **Fast-Track Code Review**\n   - Get expedited review from senior team member\n   - Focus on security and correctness\n   - Use pair programming if available\n   - Document review decisions quickly\n\n   ```bash\n   # Create PR with emergency labels\n   gh pr create --title \"ðŸš¨ HOTFIX: Fix critical auth vulnerability\" \\\n                --body \"Emergency fix for production issue #1234\n                \n                **Issue:** Users cannot authenticate due to security flaw\n                **Solution:** Implement proper password hashing validation\n                **Risk:** Low - minimal code change\n                **Testing:** Focused auth tests passing\n                \n                **Requires immediate deployment**\" \\\n                --label \"hotfix,urgent,security\"\n   ```\n\n7. **Version and Tagging**\n   ```bash\n   # Update version for hotfix\n   # 1.2.3 -> 1.2.4 (patch version)\n   # or 1.2.3 -> 1.2.3-hotfix.1 (hotfix identifier)\n   \n   # Commit and tag\n   git add .\n   git commit -m \"hotfix: fix critical authentication vulnerability\n   \n   - Fix password validation logic\n   - Resolve security issue allowing bypass\n   - Minimal change to reduce risk\n   \n   Fixes: #1234\"\n   \n   git tag -a v1.2.4 -m \"Hotfix v1.2.4: Critical auth security fix\"\n   git push origin hotfix/critical-auth-fix\n   git push origin v1.2.4\n   ```\n\n8. **Staging Deployment and Validation**\n   ```bash\n   # Deploy to staging for final validation\n   ./deploy-staging.sh v1.2.4\n   \n   # Critical path testing\n   curl -X POST staging.example.com/api/auth/login \\\n        -H \"Content-Type: application/json\" \\\n        -d '{\"email\":\"test@example.com\",\"password\":\"testpass\"}'\n   \n   # Smoke tests\n   npm run test:smoke:staging\n   ```\n\n9. **Production Deployment Strategy**\n   \n   **Blue-Green Deployment:**\n   ```bash\n   # Deploy to blue environment\n   ./deploy-blue.sh v1.2.4\n   \n   # Validate blue environment\n   ./health-check-blue.sh\n   \n   # Switch traffic to blue\n   ./switch-to-blue.sh\n   \n   # Monitor for issues\n   ./monitor-deployment.sh\n   ```\n   \n   **Rolling Deployment:**\n   ```bash\n   # Deploy to subset of servers\n   ./deploy-rolling.sh v1.2.4 --batch-size 1\n   \n   # Monitor each batch\n   ./monitor-batch.sh\n   \n   # Continue if healthy\n   ./deploy-next-batch.sh\n   ```\n\n10. **Deployment Execution**\n    ```bash\n    # Pre-deployment checklist\n    # [ ] Database backup completed\n    # [ ] Rollback plan ready\n    # [ ] Monitoring alerts active\n    # [ ] Team standing by\n    \n    # Execute deployment\n    ./deploy-production.sh v1.2.4\n    \n    # Immediate validation\n    ./validate-hotfix.sh\n    ```\n\n11. **Real-Time Monitoring**\n    ```bash\n    # Monitor key metrics\n    watch -n 10 'curl -s https://api.example.com/health | jq .'\n    \n    # Monitor error rates\n    tail -f /var/log/app/error.log | grep -i \"auth\"\n    \n    # Check application metrics\n    # - Response times\n    # - Error rates\n    # - User authentication success\n    # - System resource usage\n    ```\n\n12. **Validation and Testing**\n    ```bash\n    # Post-deployment validation\n    ./test-critical-paths.sh\n    \n    # User authentication test\n    curl -X POST https://api.example.com/auth/login \\\n         -H \"Content-Type: application/json\" \\\n         -d '{\"email\":\"test@example.com\",\"password\":\"testpass\"}'\n    \n    # Security validation\n    ./security-test.sh\n    \n    # Performance check\n    ./performance-check.sh\n    ```\n\n13. **Communication and Updates**\n    ```markdown\n    ## Deployment Status Update\n    \n    **Time:** 2024-01-15 14:30 UTC\n    **Status:** âœ… Hotfix deployed successfully\n    **Version:** v1.2.4\n    \n    **Validation Results:**\n    - âœ… User authentication working\n    - âœ… Security vulnerability patched\n    - âœ… No performance degradation\n    - âœ… Critical user flows operational\n    \n    **Next Steps:**\n    - Continue monitoring for 2 hours\n    - Prepare post-incident review\n    - Update documentation\n    ```\n\n14. **Rollback Procedures**\n    ```bash\n    # Automated rollback script\n    #!/bin/bash\n    PREVIOUS_VERSION=\"v1.2.3\"\n    \n    if [ \"$1\" = \"rollback\" ]; then\n        echo \"Rolling back to $PREVIOUS_VERSION\"\n        ./deploy-production.sh $PREVIOUS_VERSION\n        ./validate-rollback.sh\n        echo \"Rollback completed\"\n    fi\n    \n    # Manual rollback steps\n    # 1. Switch load balancer to previous version\n    # 2. Validate previous version health\n    # 3. Monitor for stability\n    # 4. Communicate rollback to team\n    ```\n\n15. **Post-Deployment Monitoring**\n    - Monitor for 2-4 hours after deployment\n    - Watch error rates and performance metrics\n    - Check user feedback and support tickets\n    - Validate fix effectiveness\n    - Document any issues or observations\n\n16. **Documentation and Reporting**\n    ```markdown\n    # Hotfix Deployment Report\n    \n    **Incident:** Critical authentication vulnerability\n    **Hotfix Version:** v1.2.4\n    **Deployment Time:** 2024-01-15 14:30 UTC\n    **Duration:** 45 minutes (from identification to resolution)\n    \n    **Timeline:**\n    - 13:45 - Issue identified\n    - 13:50 - Hotfix development started\n    - 14:10 - Code review completed\n    - 14:20 - Staging validation\n    - 14:30 - Production deployment\n    - 14:35 - Validation completed\n    \n    **Impact:**\n    - 0 minutes downtime\n    - Security vulnerability resolved\n    - No user data compromised\n    \n    **Lessons Learned:**\n    - Need better automated security testing\n    - Improve incident response communication\n    ```\n\n17. **Merge Back to Main Branch**\n    ```bash\n    # After successful hotfix deployment\n    git checkout main\n    git pull origin main\n    git merge hotfix/critical-auth-fix\n    git push origin main\n    \n    # Clean up hotfix branch\n    git branch -d hotfix/critical-auth-fix\n    git push origin --delete hotfix/critical-auth-fix\n    ```\n\n18. **Post-Incident Activities**\n    - Schedule post-incident review meeting\n    - Update runbooks and procedures\n    - Identify process improvements\n    - Update monitoring and alerting\n    - Plan preventive measures\n\n**Hotfix Best Practices:**\n\n1. **Keep It Simple:** Minimal changes only\n2. **Test Thoroughly:** Even under time pressure\n3. **Communicate Clearly:** Keep stakeholders informed\n4. **Monitor Closely:** Watch the fix in production\n5. **Document Everything:** For post-incident review\n6. **Plan for Rollback:** Always have a way back\n7. **Learn and Improve:** Update processes based on learnings\n\n**Emergency Contacts and Escalation:**\n```bash\n# Emergency contact list\nON_CALL_ENGINEER=\"+1-555-0123\"\nSENIOR_ENGINEER=\"+1-555-0124\"\nENGINEERING_MANAGER=\"+1-555-0125\"\nINCIDENT_COMMANDER=\"+1-555-0126\"\n\n# Escalation thresholds\n# 15 minutes: Senior engineer\n# 30 minutes: Engineering manager\n# 60 minutes: Incident commander\n```\n\nRemember: Hotfixes are for genuine emergencies only. When in doubt, follow the normal release process.